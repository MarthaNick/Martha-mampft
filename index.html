<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Martha's Meals</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <h1>Martha's Meals</h1>

    <div class="top-controls">
      <div id="topConstraintsLegend">
        <div class="legend-card">
          <div class="legend-title" style="text-align:left;">Constraints reminder</div>
          <div class="legend-list" style="justify-content:flex-start;">
            <span class="constraint-badge badge-pasta">pasta</span>
            <span class="constraint-badge badge-green_vegetable">green_vegetable</span>
            <span class="constraint-badge badge-oven">oven</span>
            <span class="constraint-badge badge-grain">grain</span>
            <span class="constraint-badge badge-seasonal">seasonal</span>
            <span class="constraint-badge badge-salad">salad</span>
            <span class="constraint-badge badge-beans_lentils">beans_lentils</span>
            <span class="constraint-badge badge-eggs">eggs</span>
            <span class="constraint-badge badge-dairy">dairy</span>
            <span class="constraint-badge">3× vegetarian</span>
            <span class="constraint-badge">1× meat/poultry/fish</span>
          </div>
        </div>
        <div class="legend-card" style="margin-top:12px;">
          <div class="legend-title" style="text-align:left;">World food regions</div>
          <div class="legend-list" style="justify-content:flex-start;">
            <span class="constraint-badge">mediterranean</span>
            <span class="constraint-badge">eastern_european</span>
            <span class="constraint-badge">scandinavian</span>
            <span class="constraint-badge">germanic</span>
            <span class="constraint-badge">north_american</span>
            <span class="constraint-badge">middle_eastern</span>
            <span class="constraint-badge">latin_american</span>
            <span class="constraint-badge">south_east_asian</span>
            <span class="constraint-badge">east_asian</span>
            <span class="constraint-badge">african</span>
            <span class="constraint-badge">caribbean</span>
          </div>
        </div>
      </div>
      <div class="buttons-panel">
      <div class="button-container">
      <!-- Row 1: Prev | New Randomization | Next -->
      <div class="nav-randomize-row">
        <button class="prev-week-btn align-left" onclick="previousWeek()" id="prevWeekBtn">← Previous Week</button>
        <button class="randomize-btn" onclick="newRandomization()" id="randomizeBtn">New Randomization</button>
        <button class="next-week-btn align-right" onclick="nextWeek()" id="nextWeekBtn">Next Week →</button>
      </div>

      <!-- Row 2: Favorites, Banned (Blue pastels) -->
      <div class="button-row">
        <button
          class="favorites-btn"
          onclick="showFavorites()"
          id="favoritesBtn"
          style="display: none"
        >
          ❤️ Favorites
        </button>
        <button
          class="banned-btn"
          onclick="showBanned()"
          id="bannedBtn"
          style="display: none"
        >
          🚫 Banned
        </button>
      </div>

      <!-- Row 3: Export Shopping List (Yellow pastel) -->
      <div class="button-row">
        <button
          class="export-btn"
          onclick="showShoppingList()"
          id="exportBtn"
          style="display: none"
        >
          📋 View Shopping List
        </button>
      </div>

      <!-- Row 4: Save, Load State (Red pastels) -->
      <div class="button-row">
        <button
          class="save-btn"
          onclick="saveState()"
          id="saveBtn"
        >
          💾 Save State
        </button>
        <button
          class="load-btn"
          onclick="loadState()"
          id="loadBtn"
        >
          📂 Load State
        </button>
      </div>
      </div>
    </div>

    <div class="week-indicator" id="weekIndicator" style="display: none">
      <span id="weekText"></span>
    </div>

    <div class="meals-container" id="mealsContainer"></div>
    <div id="constraintsLegend">
      <div class="legend-card">
        <div class="legend-title">Weekly constraints to satisfy</div>
        <div class="legend-list">
          <span class="constraint-badge badge-pasta">pasta</span>
          <span class="constraint-badge badge-green_vegetable">green_vegetable</span>
          <span class="constraint-badge badge-oven">oven</span>
          <span class="constraint-badge badge-grain">grain</span>
          <span class="constraint-badge badge-seasonal">seasonal</span>
          <span class="constraint-badge badge-salad">salad</span>
          <span class="constraint-badge badge-beans_lentils">beans_lentils</span>
          <span class="constraint-badge badge-eggs">eggs</span>
          <span class="constraint-badge badge-dairy">dairy</span>
          <span class="constraint-badge">3× vegetarian</span>
          <span class="constraint-badge">1× meat/poultry/fish</span>
        </div>
      </div>
    </div>

    <script src="meals.js"></script>
    <div class="list-container" id="favoritesContainer">
      <div class="list-header">
        <h2>❤️ Favorite Meals</h2>
        <button class="back-btn" onclick="showMainView()">
          ← Back to Meal Planner
        </button>
      </div>
      <div class="meals-container show" id="favoritesMealsGrid"></div>
    </div>

    <div class="list-container" id="bannedContainer">
      <div class="list-header">
        <h2>🚫 Banned Meals</h2>
        <button class="back-btn" onclick="showMainView()">
          ← Back to Meal Planner
        </button>
      </div>
      <div class="meals-container show" id="bannedMealsGrid"></div>
    </div>

    <div class="list-container" id="shoppingListContainer">
      <div class="list-header">
        <h2>📋 Shopping List</h2>
        <div class="shopping-list-buttons">
          <button class="back-btn" onclick="showMainView()">
            ← Back to Meal Planner
          </button>
          <button class="download-btn" onclick="downloadShoppingList()">
            📥 Download List
          </button>
          <button class="copy-short-list-btn" onclick="copyShortList()">
            📋 Save as Short List
          </button>
        </div>
      </div>
      <div id="shoppingListContent"></div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
